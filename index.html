<!DOCTYPE html><html><head><meta charset="utf-8"><title>Plaits.js</title><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootswatch/3.1.1/slate/bootstrap.min.css"><link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,700|Inconsolata|Raleway:200"><style>/* Highlight.js Theme Tomorrow Night Eighties */
pre{color:#fff;background:#272b30;border:1px solid rgba(255, 255, 255, 0.2)}
pre code{display:block;padding:.5em;background:#272b30}
.hljs-comment,.hljs-title{color:#999}.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo{color:#f2777a}.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant{color:#f99157}.ruby .hljs-class .hljs-title,.css .hljs-rules .hljs-attribute{color:#fc6}.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.ruby .hljs-symbol,.xml .hljs-cdata{color:#9c9}.css .hljs-hexcolor{color:#6cc}.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title{color:#69c}.hljs-keyword,.javascript .hljs-function{color:#c9c}.hljs{display:block;background:#2d2d2d;color:#ccc;padding:.5em}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata{opacity:.5}</style><style>body {
  font-family: 'Roboto' sans-serif !important;
}
h1,
h2,
h3,
h4,
h5,
.aglio {
  font-family: 'Raleway' sans-serif !important;
}
h1 a,
h2 a,
h3 a,
h4 a,
h5 a {
  display: none;
}
h1:hover a,
h2:hover a,
h3:hover a,
h4:hover a,
h5:hover a {
  display: inline;
}
code {
  color: #222;
  background-color: #aaa;
  font-family: 'Inconsolata' monospace !important;
}
a[data-target] {
  cursor: pointer;
}
h4 {
  margin-top: 18px;
  font-size: 24px;
  border-bottom: 1px solid #555;
  padding-bottom: 6px;
}
h5 {
  font-size: 20px;
}
.back-to-top {
  position: fixed;
  z-index: 1;
  bottom: 0px;
  right: 24px;
  padding: 4px 8px;
  color: #aaa;
  background-color: #171b20;
  text-decoration: none !important;
  border-top: 1px solid rgba(0,0,0,0.1);
  border-left: 1px solid rgba(0,0,0,0.1);
  border-right: 1px solid rgba(0,0,0,0.1);
  border-top-left-radius: 3px;
  border-top-right-radius: 3px;
}
.panel {
  overflow: hidden;
}
.panel-heading code {
  margin-left: 3px;
  color: #000;
  background-color: rgba(255,255,255,0.7);
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  white-space: -pre-wrap;
  white-space: -o-pre-wrap;
  word-wrap: break-word;
}
.panel-heading h3 {
  margin-top: 10px;
  margin-bottom: 10px;
}
a.list-group-item:hover {
  background-color: #f8f8f8;
  border-left: 2px solid #555;
  padding-left: 15px;
}
.indent {
  display: block;
  text-indent: 16px;
}
.list-group-item {
  padding-left: 16px;
}
.list-group-item .toggle .open {
  display: block;
}
.list-group-item .toggle .closed {
  display: none;
}
.list-group-item.collapsed .toggle .open {
  display: none;
}
.list-group-item.collapsed .toggle .closed {
  display: block;
}
a.list-group-item:hover {
  background-color: #4b5159;
  border-left-color: #c8c8c8;
}
a.list-group-item {
  font-size: 13px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
a.list-group-item.heading {
  font-size: 15px;
  background-color: #3e444c;
}
a.list-group-item.heading:hover {
  background-color: #4b5159;
}
.list-group-item.collapse {
  display: none;
}
.list-group-item.collapse.in {
  display: block;
}
.list-group-item a span.closed {
  display: none;
}
.list-group-item a span.open {
  display: block;
}
.list-group-item a.collapsed span.closed {
  display: block;
}
.list-group-item a.collapsed span.open {
  display: none;
}
#nav {
  width: inherit;
  margin-top: 38px;
  max-width: 255px;
  top: 0;
  bottom: 0;
  padding-right: 12px;
  padding-bottom: 12px;
  overflow-y: auto;
}
@media (max-width: 1199px) {
  #nav {
    max-width: 212px;
  }
}
</style><script>(function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-55936825-1', 'auto');
ga('send', 'pageview');</script></head><body><a href="#top" class="text-muted back-to-top"><i class="fa fa-toggle-up"></i>&nbsp;Back to top</a><div class="container"><div class="row"><div class="col-md-3"><nav id="nav" class="hidden-sm hidden-xs affix nav"><div class="list-group"><a data-toggle="" data-target="#introduction-menu" href="#introduction" class="list-group-item heading collapsed">Introduction</a><div id="introduction-menu"></div></div><div class="list-group"><a data-toggle="" data-target="#latest-release---0.1.3-menu" href="#latest-release---0.1.3" class="list-group-item heading collapsed">Latest Release - 0.1.3</a><div id="latest-release---0.1.3-menu"><a href="#latest-release---0.1.3-dependency-&amp;-test-status" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Dependency &amp; Test Status</a><a href="#latest-release---0.1.3-contribute" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Contribute</a></div></div><div class="list-group"><a data-toggle="" data-target="#form-models-menu" href="#form-models" class="list-group-item heading collapsed">Form Models</a><div id="form-models-menu"><a href="#form-models-model-example" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Model Example</a><a href="#form-models-model-field-labels" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Model Field Labels</a><a href="#form-models-model-defaults" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Model Defaults</a><a href="#form-models-model-instantiation" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Model Instantiation</a><a href="#form-models-getfieldidentifier" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">getFieldIdentifier</a><a href="#form-models-getlabeltext" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">getLabelText</a><a href="#form-models-isrequired" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">isRequired</a><a href="#form-models-adderror" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">addError</a><a href="#form-models-haserrors" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">hasErrors</a></div></div><div class="list-group"><a data-toggle="" data-target="#provided-validators-menu" href="#provided-validators" class="list-group-item heading collapsed">Provided Validators</a><div id="provided-validators-menu"><a href="#provided-validators-custom-error-messages" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Custom Error Messages</a><a href="#provided-validators-required" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Required</a><a href="#provided-validators-email" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Email</a><a href="#provided-validators-minimum-length" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Minimum Length</a><a href="#provided-validators-maximum-length" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Maximum Length</a><a href="#provided-validators-length" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Length</a><a href="#provided-validators-numeric" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Numeric</a><a href="#provided-validators-alpha" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Alpha</a><a href="#provided-validators-alphanumeric" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Alphanumeric</a><a href="#provided-validators-url" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Url</a><a href="#provided-validators-ip-address" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">IP Address</a><a href="#provided-validators-credit-card" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Credit Card</a><a href="#provided-validators-equals" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Equals</a><a href="#provided-validators-one-of" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">One Of</a><a href="#provided-validators-contains" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Contains</a><a href="#provided-validators-matches" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Matches</a><a href="#provided-validators-date" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Date</a><a href="#provided-validators-date-with-specific-format" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Date with Specific Format</a><a href="#provided-validators-match-another-property-/-field" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Match Another Property / Field</a><a href="#provided-validators-int" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Int</a><a href="#provided-validators-float" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Float</a><a href="#provided-validators-min" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Min</a><a href="#provided-validators-max" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Max</a><a href="#provided-validators-range" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Range</a></div></div><div class="list-group"><a data-toggle="" data-target="#file-validators-menu" href="#file-validators" class="list-group-item heading collapsed">File Validators</a><div id="file-validators-menu"><a href="#file-validators-file-field-mapping" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">File Field Mapping</a><a href="#file-validators-required" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Required</a><a href="#file-validators-min-size" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Min Size</a><a href="#file-validators-max-size" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Max Size</a><a href="#file-validators-mime-types" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">MIME-Types</a><a href="#file-validators-enforce-mime-type-match" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Enforce Mime Type Match</a></div></div><div class="list-group"><a data-toggle="" data-target="#custom-validators-menu" href="#custom-validators" class="list-group-item heading collapsed">Custom Validators</a><div id="custom-validators-menu"><a href="#custom-validators-example" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Example</a></div></div><div class="list-group"><a data-toggle="" data-target="#form-request-parsing-menu" href="#form-request-parsing" class="list-group-item heading collapsed">Form Request Parsing</a><div id="form-request-parsing-menu"><a href="#form-request-parsing-example" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Example</a></div></div><div class="list-group"><a data-toggle="" data-target="#form-validation-menu" href="#form-validation" class="list-group-item heading collapsed">Form Validation</a><div id="form-validation-menu"><a href="#form-validation-validation" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Validation</a><a href="#form-validation-passing-objects-to-validators" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Passing Objects to Validators</a><a href="#form-validation-errors" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Errors</a><a href="#form-validation-geterrors" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">getErrors</a><a href="#form-validation-getfirsterror" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">getFirstError</a><a href="#form-validation-errors-object" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Errors Object</a></div></div><div class="list-group"><a data-toggle="" data-target="#events-menu" href="#events" class="list-group-item heading collapsed">Events</a><div id="events-menu"><a href="#events-backbone-events" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Backbone Events</a><a href="#events-plaits-specific-events" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Plaits Specific Events</a><a href="#events-beforeparserequest" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">beforeParseRequest</a><a href="#events-afterparserequest" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">afterParseRequest</a><a href="#events-beforevalidate" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">beforeValidate</a><a href="#events-aftervalidate" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">afterValidate</a></div></div><div class="list-group"><a data-toggle="" data-target="#express-middleware-menu" href="#express-middleware" class="list-group-item heading collapsed">Express Middleware</a><div id="express-middleware-menu"><a href="#express-middleware-options" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Options</a></div></div><div class="list-group"><a data-toggle="" data-target="#html-helpers-menu" href="#html-helpers" class="list-group-item heading collapsed">Html Helpers</a><div id="html-helpers-menu"><a href="#html-helpers-button" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">button</a><a href="#html-helpers-resetbutton" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">resetButton</a><a href="#html-helpers-submitbutton" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">submitButton</a><a href="#html-helpers-labelfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">labelFor</a><a href="#html-helpers-firsterrorfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">firstErrorFor</a><a href="#html-helpers-errorsfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">errorsFor</a><a href="#html-helpers-errorsummary" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">errorSummary</a><a href="#html-helpers-textfieldfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">textFieldFor</a><a href="#html-helpers-emailfieldfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">emailFieldFor</a><a href="#html-helpers-textareafor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">textAreaFor</a><a href="#html-helpers-numberfieldfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">numberFieldFor</a><a href="#html-helpers-rangefieldfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">rangeFieldFor</a><a href="#html-helpers-colorfieldfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">colorFieldFor</a><a href="#html-helpers-searchfieldfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">searchFieldFor</a><a href="#html-helpers-datefieldfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">dateFieldFor</a><a href="#html-helpers-timefieldfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">timeFieldFor</a><a href="#html-helpers-telfieldfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">telFieldFor</a><a href="#html-helpers-urlfieldfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">urlFieldFor</a><a href="#html-helpers-hiddenfieldfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">hiddenFieldFor</a><a href="#html-helpers-passwordfieldfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">passwordFieldFor</a><a href="#html-helpers-filefieldfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">fileFieldFor</a><a href="#html-helpers-selectfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">selectFor</a><a href="#html-helpers-checkboxfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">checkboxFor</a><a href="#html-helpers-radiofor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">radioFor</a><a href="#html-helpers-checkboxlistfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">checkboxListFor</a><a href="#html-helpers-radiolistfor" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">radioListFor</a></div></div><div class="list-group"><a data-toggle="" data-target="#html-templates-menu" href="#html-templates" class="list-group-item heading collapsed">Html Templates</a><div id="html-templates-menu"><a href="#html-templates-location" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Location</a><a href="#html-templates-usage" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Usage</a></div></div><div class="list-group"><a data-toggle="" data-target="#custom-html-templates-menu" href="#custom-html-templates" class="list-group-item heading collapsed">Custom Html Templates</a><div id="custom-html-templates-menu"><a href="#custom-html-templates-overriding-defaults" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Overriding Defaults</a><a href="#custom-html-templates-entirely-custom-templates" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Entirely Custom Templates</a></div></div><div class="list-group"><a data-toggle="" data-target="#full-example-menu" href="#full-example" class="list-group-item heading collapsed">Full Example</a><div id="full-example-menu"><a href="#full-example-middleware" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Middleware</a><a href="#full-example-model" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Model</a><a href="#full-example-routes" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Routes</a><a href="#full-example-template" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Template</a></div></div><div class="list-group"><a data-toggle="" data-target="#coming-soon-menu" href="#coming-soon" class="list-group-item heading collapsed">Coming Soon</a><div id="coming-soon-menu"><a href="#coming-soon-more-validators" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">More Validators</a><a href="#coming-soon-examples-repository" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item">Examples Repository</a></div></div><div class="list-group"><a data-toggle="" data-target="#changelog-menu" href="#changelog" class="list-group-item heading collapsed">Changelog</a><div id="changelog-menu"></div></div></nav></div><div class="col-md-8"><div><header><div class="page-header"><h1 id="top">Plaits.js</h1></div></header><div class="description"></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="introduction">Introduction&nbsp;<a href="#introduction"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>Plaits is a form creation, validation and rendering library for Node.js.</p>
<p>It supports both synchronous and asynchronous validation (via <a href="https://github.com/petkaantonov/bluebird/">Promises</a>), and comes with many built-in validators, many of which are provided
by the excellent <a href="https://github.com/chriso/validator.js">validator.js library</a>.</p>
<p>It is intended for use with <a href="http://expressjs.com/">Express</a>, but can be used with other libraries and frameworks too.</p>
<p>Plaits is inspired by the form validation features found in frameworks such as <a href="http://www.asp.net/mvc/mvc4">.NET MVC</a>,
and thanks goes to the great work done on the <a href="https://github.com/tgriesser/bookshelf">Bookshelf ORM</a> for additional inspiration and helping with some underlying code principles.</p>
<p>The source is available on <a href="https://github.com/Persata/plaits">GitHub</a>, and it comes with a large suite of <a href="https://travis-ci.org/Persata/plaits">unit tests</a>.</p>
</div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="latest-release---0.1.3">Latest Release - 0.1.3&nbsp;<a href="#latest-release---0.1.3"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>Version 0.1.3.</p>
<p>View the <a href="#changelog">Changelog</a> below.</p>
<h4 id="latest-release---0.1.3-dependency-&amp;-test-status">Dependency &amp; Test Status&nbsp;<a href="#latest-release---0.1.3-dependency-&amp;-test-status"><i class="fa fa-link"></i></a></h4><p>Build Status - <a href="https://travis-ci.org/Persata/plaits"><img src="https://travis-ci.org/Persata/plaits.svg" alt="Build Status"></a></p>
<p>Dependencies - <a href="https://gemnasium.com/Persata/plaits"><img src="https://gemnasium.com/Persata/plaits.svg" alt="Dependency Status"></a></p>
<p>Code Coverage - <a href="https://coveralls.io/r/Persata/plaits?branch=master"><img src="https://img.shields.io/coveralls/Persata/plaits.svg" alt="Coverage Status"></a></p>
<h4 id="latest-release---0.1.3-contribute">Contribute&nbsp;<a href="#latest-release---0.1.3-contribute"><i class="fa fa-link"></i></a></h4><p>Please feel free to report bugs and suggest features you’d like to see on the <a href="https://github.com/Persata/plaits/issues">Plaits GitHub Issues Page</a>,
or send tweets to <a href="https://twitter.com/persata">@persata</a>.</p>
</div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="form-models">Form Models&nbsp;<a href="#form-models"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>Plaits models are simply <a href="http://backbonejs.org/">Backbone</a> models with different functionality.</p>
<p>A model <strong>must</strong> be given a name, and a list of fields. It also takes an optional list of validators <a href="#provided-validators">(examples later)</a>.</p>
<h4 id="form-models-model-example">Model Example&nbsp;<a href="#form-models-model-example"><i class="fa fa-link"></i></a></h4><p>A basic model example:</p>
<pre><code><span class="hljs-comment">// Require Plaits</span>
<span class="hljs-keyword">var</span> Plaits = <span class="hljs-built_in">require</span>(<span class="hljs-string">'plaits'</span>);

<span class="hljs-comment">// Register Form Declaration</span>
<span class="hljs-keyword">var</span> RegisterForm = Plaits.Model.extend(
  {
    <span class="hljs-comment">// Form Name</span>
    name: <span class="hljs-string">'register_form'</span>,
    <span class="hljs-comment">// Field List</span>
    fields: [
      <span class="hljs-string">'username'</span>,
      <span class="hljs-string">'email_address'</span>,
      <span class="hljs-string">'password'</span>,
      <span class="hljs-string">'confirm_password'</span>
    ],
    <span class="hljs-comment">// Validators</span>
    validators: {
      username: [
        Plaits.Validators.required(),
        Plaits.Validators.alphanumeric()
      ],
      email_address: [
        Plaits.Validators.required(),
        Plaits.Validators.email()
      ],
      password: [
        Plaits.Validators.required(),
        Plaits.Validators.minLength(<span class="hljs-number">8</span>)
      ],
      confirm_password [
        Plaits.Validators.matchProperty(<span class="hljs-string">'password'</span>)
      ]
    }
  }
);

<span class="hljs-comment">// Export Form</span>
<span class="hljs-built_in">module</span>.exports = RegisterForm;
</code></pre><h4 id="form-models-model-field-labels">Model Field Labels&nbsp;<a href="#form-models-model-field-labels"><i class="fa fa-link"></i></a></h4><p>Models can also take a labels object as part of their declaration:</p>
<pre><code>// Register Form Declaration
var RegisterForm = Plaits.Model.extend(
  {
    <span class="hljs-keyword">...</span>
    labels: {
      <span class="hljs-string">'username'</span>: <span class="hljs-string">'Your Chosen Username'</span>
    }
    <span class="hljs-keyword">...</span>
  }
);
</code></pre><p>If a label is not provided, it will be auto generated by <a href="https://github.com/dreamerslab/node.inflection">Node Inflection’s</a> titleize function, for example:</p>
<pre><code>email_address =&gt; <span class="hljs-string">'Email Address'</span>
confirm_password =&gt; <span class="hljs-string">'Confirm Password'</span>
</code></pre><p>This will return either the custom label you have set in the model itself, or will generate one.</p>
<h4 id="form-models-model-defaults">Model Defaults&nbsp;<a href="#form-models-model-defaults"><i class="fa fa-link"></i></a></h4><p>You can specify the defaults for model values using the <code>defaults</code> key:</p>
<pre><code>// Register Form Declaration
var RegisterForm = Plaits.Model.extend(
  {
    <span class="hljs-keyword">...</span>
    defaults: {
      <span class="hljs-string">'email_address'</span>: <span class="hljs-string">'email@example.com'</span>
    }
    <span class="hljs-keyword">...</span>
  }
);
</code></pre><h4 id="form-models-model-instantiation">Model Instantiation&nbsp;<a href="#form-models-model-instantiation"><i class="fa fa-link"></i></a></h4><p>To instantiate a form model, simply require it (if necessary) &amp; use <code>new</code>:</p>
<pre><code><span class="hljs-comment">// Require</span>
<span class="hljs-keyword">var</span> RegisterForm = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../forms/register'</span>);

<span class="hljs-comment">// New Register Form</span>
<span class="hljs-keyword">var</span> registerForm = <span class="hljs-keyword">new</span> RegisterForm();
</code></pre><h4 id="form-models-getfieldidentifier">getFieldIdentifier&nbsp;<a href="#form-models-getfieldidentifier"><i class="fa fa-link"></i></a></h4><p>Gets the field identifier for a model’s field - this is used to generate a form name / ID that the <code>parseRequest()</code> functions can automatically parse.</p>
<p>It is made up of the field’s name and the model’s name joined with an underscore - see <a href="#form-request-parsing">Form Request Parsing</a>.</p>
<pre><code><span class="hljs-comment">// Get Field Identifier</span>
<span class="hljs-attribute">model</span>.<span class="hljs-function">getFieldIdentifier</span>(field);

<span class="hljs-comment">// Examples</span>
<span class="hljs-attribute">console</span>.<span class="hljs-function">log</span>(registerForm.<span class="hljs-function">getFieldIdentifier</span>(<span class="hljs-string">'email_address'</span>));
<span class="hljs-comment">// =&gt; 'register_form_email_address'</span>

<span class="hljs-attribute">console</span>.<span class="hljs-function">log</span>(registerForm.<span class="hljs-function">getFieldIdentifier</span>(<span class="hljs-string">'username'</span>));
<span class="hljs-comment">// =&gt; 'register_form_username'</span>
</code></pre><h4 id="form-models-getlabeltext">getLabelText&nbsp;<a href="#form-models-getlabeltext"><i class="fa fa-link"></i></a></h4><p>Gets the label text for a model’s field. Used to fetch or generate the label text.</p>
<pre><code><span class="hljs-comment">// Get Label for a Field</span>
<span class="hljs-attribute">model</span>.<span class="hljs-function">getLabelText</span>(field);

<span class="hljs-comment">// Examples</span>
<span class="hljs-attribute">console</span>.<span class="hljs-function">log</span>(registerForm.<span class="hljs-function">getLabelText</span>(<span class="hljs-string">'email_address'</span>));
<span class="hljs-comment">// =&gt; 'Email Address'</span>

<span class="hljs-attribute">console</span>.<span class="hljs-function">log</span>(registerForm.<span class="hljs-function">getLabelText</span>(<span class="hljs-string">'username'</span>));
<span class="hljs-comment">// =&gt; 'Username'</span>
</code></pre><h4 id="form-models-isrequired">isRequired&nbsp;<a href="#form-models-isrequired"><i class="fa fa-link"></i></a></h4><p>Checks the provided validators to see if the given field is required. This is achieved by analysing the function names for <code>requiredValidator</code>.</p>
<pre><code><span class="hljs-comment">// Get Required Status</span>
<span class="hljs-attribute">model</span>.<span class="hljs-function">isRequired</span>(field);

<span class="hljs-comment">// Examples</span>
<span class="hljs-attribute">console</span>.<span class="hljs-function">log</span>(registerForm.<span class="hljs-function">isRequired</span>(<span class="hljs-string">'email_address'</span>));
<span class="hljs-comment">// =&gt; true</span>
</code></pre><h4 id="form-models-adderror">addError&nbsp;<a href="#form-models-adderror"><i class="fa fa-link"></i></a></h4><p>Adds the specified error message to the specified field. Use if you want to manually add an error message for a field to the form.</p>
<pre><code><span class="hljs-comment">// Add an Error</span>
<span class="hljs-attribute">model</span>.<span class="hljs-function">addError</span>(field, errorMessage);

<span class="hljs-comment">// Example</span>
<span class="hljs-attribute">registerForm</span>.<span class="hljs-function">addError</span>(<span class="hljs-string">'username'</span>, <span class="hljs-string">'Manually adding this error message.'</span>);

<span class="hljs-attribute">console</span>.<span class="hljs-function">log</span>(registerForm.<span class="hljs-function">getFirstError</span>(<span class="hljs-string">'username'</span>));
<span class="hljs-comment">// =&gt; 'Manually adding this error message.'</span>
</code></pre><h4 id="form-models-haserrors">hasErrors&nbsp;<a href="#form-models-haserrors"><i class="fa fa-link"></i></a></h4><p>Check whether the specified field has any errors attached to it.</p>
<pre><code><span class="hljs-comment">// Check For Errors</span>
<span class="hljs-attribute">model</span>.<span class="hljs-function">hasErrors</span>(field);

<span class="hljs-comment">// Example</span>
<span class="hljs-attribute">console</span>.<span class="hljs-function">log</span>(registerForm.<span class="hljs-function">hasErrors</span>(<span class="hljs-string">'username'</span>));
<span class="hljs-comment">// =&gt; false</span>
</code></pre></div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="provided-validators">Provided Validators&nbsp;<a href="#provided-validators"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>Plaits comes with a large set of built in validators which should be able to handle many of your use cases.
Many of the validators are backed by the <a href="https://github.com/chriso/validator.js">validator.js library</a>.</p>
<p>Many will take certain parameters to define their behaviour, for example <code>minLength</code> will take a parameter to define
what the minimum length should be.</p>
<h4 id="provided-validators-custom-error-messages">Custom Error Messages&nbsp;<a href="#provided-validators-custom-error-messages"><i class="fa fa-link"></i></a></h4><p>All built in validators take an optional custom error message if you wish to override the default error message.</p>
<p>You can use the string <code>{{label}}</code> in your custom error messages to have the label for the field automatically inserted,
for example the string ‘{{label}} must be a minimum of 10 characters’ could produce ‘Your password must be a minimum of 10 characters’.</p>
<p>There are also other strings you can use depending on the validator, such as <code>{{version}}</code> for IP Address, <code>{{minLength}}</code> for minimum length etc. Each is described below.</p>
<h4 id="provided-validators-required">Required&nbsp;<a href="#provided-validators-required"><i class="fa fa-link"></i></a></h4><p>Whether this field is required.</p>
<p>In most cases, this will check whether the value is null or not - null values are considered invalid.</p>
<p>When generating labels using the Html helpers and templates, the label text will be appended with an asterisk.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">required</span><span class="hljs-params">([customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-email">Email&nbsp;<a href="#provided-validators-email"><i class="fa fa-link"></i></a></h4><p>Checks if the provided value is an email address.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">email</span><span class="hljs-params">([customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-minimum-length">Minimum Length&nbsp;<a href="#provided-validators-minimum-length"><i class="fa fa-link"></i></a></h4><p>Checks that the value matches or exceeds the minimum length provided.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">minLength</span><span class="hljs-params">(minLength, [customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-maximum-length">Maximum Length&nbsp;<a href="#provided-validators-maximum-length"><i class="fa fa-link"></i></a></h4><p>Checks that the value matches or is less than the maximum length provided.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">maxLength</span><span class="hljs-params">(maxLength, [customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-length">Length&nbsp;<a href="#provided-validators-length"><i class="fa fa-link"></i></a></h4><p>This validator can be used to ensure an exact, minimum, or a range length of characters.</p>
<p>Ensure that if you are passing lengths that they are ints and not strings, so 6 instead of ‘6’.</p>
<h5 id="arguments">Arguments</h5>
<p>It takes between 1 and 3 arguments, as follows:</p>
<ul>
<li><p>1 Argument</p>
<ul>
<li>An exact length for the string</li>
</ul>
</li>
<li><p>2 Arguments</p>
<ul>
<li>Argument 1: A minimum OR exact length for the string</li>
<li>Argument 2: A maximum length for the string OR a custom error message</li>
</ul>
</li>
<li><p>3 Arguments</p>
<ul>
<li>Argument 1: A minimum length for the string</li>
<li>Argument 2: A maximum length for the string</li>
<li>Argument 3: A custom error message</li>
</ul>
</li>
</ul>
<pre><code><span class="hljs-function"><span class="hljs-title">length</span><span class="hljs-params">(args...)</span></span>
</code></pre><h4 id="provided-validators-numeric">Numeric&nbsp;<a href="#provided-validators-numeric"><i class="fa fa-link"></i></a></h4><p>Ensures the value provided is a numeric value.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">numeric</span><span class="hljs-params">([customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-alpha">Alpha&nbsp;<a href="#provided-validators-alpha"><i class="fa fa-link"></i></a></h4><p>Ensures the value provided only contains letters.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">alpha</span><span class="hljs-params">([customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-alphanumeric">Alphanumeric&nbsp;<a href="#provided-validators-alphanumeric"><i class="fa fa-link"></i></a></h4><p>Ensures the value provided only contains letters and numbers.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">alphanumeric</span><span class="hljs-params">([customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-url">Url&nbsp;<a href="#provided-validators-url"><i class="fa fa-link"></i></a></h4><p>This validator ensures that the value provided to the model is a valid URL.</p>
<h5 id="arguments">Arguments</h5>
<p>It takes between 0 and 2 arguments, as follows:</p>
<ul>
<li><p>0 Arguments:</p>
<ul>
<li>Default options from below, default error message returned.</li>
</ul>
</li>
<li><p>1 Argument, either:</p>
<ul>
<li>An object specifying the options to use for validation (see below), or</li>
<li>A custom error message</li>
</ul>
</li>
<li><p>2 Arguments</p>
<ul>
<li>Argument 1: An object specifying the options to use for validation (see below)</li>
<li>Argument 2: A custom error message</li>
</ul>
</li>
</ul>
<h5 id="declaration">Declaration</h5>
<pre><code><span class="hljs-function"><span class="hljs-title">url</span><span class="hljs-params">(args...)</span></span>
</code></pre><h5 id="default-validation-options">Default Validation Options</h5>
<pre><code>{
  <span class="hljs-attribute">protocols</span>: [<span class="hljs-string">'http'</span>,<span class="hljs-string">'https'</span>,<span class="hljs-string">'ftp'</span>],
  <span class="hljs-attribute">require_tld</span>: true,
  <span class="hljs-attribute">require_protocol</span>: false,
  <span class="hljs-attribute">allow_underscores</span>: false,
  <span class="hljs-attribute">host_whitelist</span>: false,
  <span class="hljs-attribute">host_blacklist</span>: false
}
</code></pre><h4 id="provided-validators-ip-address">IP Address&nbsp;<a href="#provided-validators-ip-address"><i class="fa fa-link"></i></a></h4><p>This validator ensures that the value provided to the model is a valid IP address. It can be used to validate version 4 or version 6 addresses, or can be version agnostic.</p>
<h5 id="arguments">Arguments</h5>
<p>It takes between 0 and 2 arguments, as follows:</p>
<ul>
<li><p>0 Arguments:</p>
<ul>
<li>IP Address matching either version 4 or version 6, default error message returned.</li>
</ul>
</li>
<li><p>1 Argument, either:</p>
<ul>
<li>An int (not a string!) that describes the version of IP address (4 or 6), or,</li>
<li>A custom error message</li>
</ul>
</li>
<li><p>2 Arguments</p>
<ul>
<li>Argument 1: An int (not a string!) that describes the version of IP address (4 or 6)</li>
<li>Argument 2: A custom error message</li>
</ul>
</li>
</ul>
<pre><code><span class="hljs-function"><span class="hljs-title">ipAddress</span><span class="hljs-params">(args...)</span></span>
</code></pre><h4 id="provided-validators-credit-card">Credit Card&nbsp;<a href="#provided-validators-credit-card"><i class="fa fa-link"></i></a></h4><p>Ensures the value provided is a valid credit card number.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">creditCard</span><span class="hljs-params">([customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-equals">Equals&nbsp;<a href="#provided-validators-equals"><i class="fa fa-link"></i></a></h4><p>When provided with an <code>equalValue</code> parameter, this will make sure the value provided to the form equals the <code>equalValue</code> provided.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">equals</span><span class="hljs-params">(equalValue, [customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-one-of">One Of&nbsp;<a href="#provided-validators-one-of"><i class="fa fa-link"></i></a></h4><p>This validator should be passed an array of acceptable values, and if the value provided to the form for validation is one of those, it will pass validation.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">oneOf</span><span class="hljs-params">(allowedValues, [customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-contains">Contains&nbsp;<a href="#provided-validators-contains"><i class="fa fa-link"></i></a></h4><p>This validator should be passed a string as the first parameter.
If the value provided to the form for validation contains this value as a substring, it will pass validation.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">contains</span><span class="hljs-params">(containsValue, [customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-matches">Matches&nbsp;<a href="#provided-validators-matches"><i class="fa fa-link"></i></a></h4><p>This validator should be passed a regex as the first parameter.
If the value provided to the form for validation matches this regex, it will pass validation.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">matches</span><span class="hljs-params">(regexValue, [customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-date">Date&nbsp;<a href="#provided-validators-date"><i class="fa fa-link"></i></a></h4><p>This validator will loosely check that the provided value for validation is a date.
It can be of any format, even a Unix timestamp.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">date</span><span class="hljs-params">([customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-date-with-specific-format">Date with Specific Format&nbsp;<a href="#provided-validators-date-with-specific-format"><i class="fa fa-link"></i></a></h4><p>This validator will check that the value provided to the form for validation is a valid date, and is in the format specified.</p>
<p>It should be provided a date format string as an argument.</p>
<p>This validator is backended by the <a href="https://github.com/moment/moment/">moment.js library</a>.</p>
<p>When specifying a custom error message, you may use <code>{{dateFormat}}</code> to have the specified format injected into your custom error message.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">dateForm</span><span class="hljs-params">(dateFormat, [customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-match-another-property-/-field">Match Another Property / Field&nbsp;<a href="#provided-validators-match-another-property-/-field"><i class="fa fa-link"></i></a></h4><p>This validator takes a property key as the first parameter.</p>
<p>When validation runs, it will check that the value provided to the form for validation is the same as the value of the given property.</p>
<p>This is usually used for comparing password &amp; confirm password fields <a href="#form-models">(see the example above)</a>.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">matchProperty</span><span class="hljs-params">(propertyKey, [customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-int">Int&nbsp;<a href="#provided-validators-int"><i class="fa fa-link"></i></a></h4><p>This validator will check that the value provided to the form is an integer.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">int</span><span class="hljs-params">([customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-float">Float&nbsp;<a href="#provided-validators-float"><i class="fa fa-link"></i></a></h4><p>This validator will check that the value provided to the form is floating point number.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">float</span><span class="hljs-params">([customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-min">Min&nbsp;<a href="#provided-validators-min"><i class="fa fa-link"></i></a></h4><p>This validator will check that the value provided to the form is greater than or equal to the minimum value given.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">min</span><span class="hljs-params">(min, [customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-max">Max&nbsp;<a href="#provided-validators-max"><i class="fa fa-link"></i></a></h4><p>This validator will check that the value provided to the form is less than or equal to the maximum value given.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">max</span><span class="hljs-params">(max, [customErrorMessage])</span></span>
</code></pre><h4 id="provided-validators-range">Range&nbsp;<a href="#provided-validators-range"><i class="fa fa-link"></i></a></h4><p>This validator will check that the value provided to the form is between or equal to the minimum and maximum values given.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">range</span><span class="hljs-params">(min, max, [customErrorMessage])</span></span>
</code></pre></div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="file-validators">File Validators&nbsp;<a href="#file-validators"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>Plaits allows for the validation of file uploads, with some setup (see <a href="#file-validators-file-field-mapping">File Field Mapping</a>)</p>
<h4 id="file-validators-file-field-mapping">File Field Mapping&nbsp;<a href="#file-validators-file-field-mapping"><i class="fa fa-link"></i></a></h4><p>Due to the various methods &amp; libraries for handling file uploads in Node / Express, the resulting file fields on a file object differ depending on which library is being used.</p>
<p>For example, <a href="https://github.com/andrewrk/connect-multiparty">connect-multiparty</a> will use <code>originalFilename</code> and <code>type</code>, whereas <a href="https://github.com/expressjs/multer">multer</a>
will have equivalent fields of <code>originalname</code> and <code>mimetype</code>.</p>
<p>In order to allow the validation of file uploads to use one consistent API, Plaits allows for the mapping of file fields to allow the validators to look up which fields to use.</p>
<p>In the case of Multer:</p>
<pre><code><span class="hljs-comment">// Use Multer</span>
<span class="hljs-tag">app</span><span class="hljs-class">.use</span>(<span class="hljs-function">multer</span>({<span class="hljs-attribute">dest</span>: <span class="hljs-string">'/tmp/uploads/'</span>}));

<span class="hljs-comment">// Set Multer Mappings</span>
<span class="hljs-tag">Plaits</span><span class="hljs-class">.setValidatorConfig</span>({<span class="hljs-attribute">fileFieldMappings</span>: Plaits.FileFieldMappings.Multer});
</code></pre><p>and for Multiparty:</p>
<pre><code><span class="hljs-comment">// Use Multiparty</span>
<span class="hljs-attribute">app</span>.<span class="hljs-function">use</span>(<span class="hljs-function">multipart</span>());

<span class="hljs-comment">// Set Multiparty Config</span>
<span class="hljs-tag">Plaits</span><span class="hljs-class">.setValidatorConfig</span>({<span class="hljs-attribute">fileFieldMappings</span>: Plaits.FileFieldMappings.Multiparty});
</code></pre><p>For custom file field mapping (in the case you’ve written the form handler yourself / are using another library), you can specify the mappings to suit.
For example:</p>
<pre><code><span class="hljs-comment">// Mappings</span>
<span class="hljs-keyword">var</span> fileFieldMappings = {
    originalFilename: <span class="hljs-symbol">'original</span>-file-name',
    <span class="hljs-class"><span class="hljs-keyword">type</span>:</span> <span class="hljs-symbol">'file</span>-mime-<span class="hljs-class"><span class="hljs-keyword">type</span>',
</span>    size: <span class="hljs-symbol">'file</span>-size'
};
<span class="hljs-comment">// Set Mapping Config</span>
<span class="hljs-type">Plaits</span>.setValidatorConfig({fileFieldMappings: fileFieldMappings);
</code></pre><h4 id="file-validators-required">Required&nbsp;<a href="#file-validators-required"><i class="fa fa-link"></i></a></h4><p>Whether this file field is required.</p>
<p>This will check if the uploaded file has a name and a size greater than 0 bytes.</p>
<p>When generating labels using the Html helpers and templates, the label text will be appended with an asterisk.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">required</span><span class="hljs-params">([customErrorMessage])</span></span>
</code></pre><h4 id="file-validators-min-size">Min Size&nbsp;<a href="#file-validators-min-size"><i class="fa fa-link"></i></a></h4><p>This will check that the file being uploaded is greater than the minimum size provided to the function.</p>
<p>The minimum size value can given in either a numeric format, e.g. 60000 for bytes, or a string that follows JEDEC standards, e.g. <code>60kB</code>, <code>0.5mb</code> etc.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">minSize</span><span class="hljs-params">(minSize, [customErrorMessage])</span></span>
</code></pre><h4 id="file-validators-max-size">Max Size&nbsp;<a href="#file-validators-max-size"><i class="fa fa-link"></i></a></h4><p>This will check that the file being uploaded is smaller than the maximum size provided to the function.</p>
<p>The maximum size value can given in either a numeric format, e.g. 60000 for bytes, or a string that follows JEDEC standards, e.g. <code>60kB</code>, <code>0.5mb</code> etc.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">maxSize</span><span class="hljs-params">(maxSize, [customErrorMessage])</span></span>
</code></pre><h4 id="file-validators-mime-types">MIME-Types&nbsp;<a href="#file-validators-mime-types"><i class="fa fa-link"></i></a></h4><p>This will check that the file being uploaded is one of the MIME-Types provided to the function.</p>
<p>The function should be passed a string for a single MIME-Type, or an array of allowed MIME-Types.</p>
<p>The MIME-Type value given to the function can include wildcards if needed, for example <code>[&#39;image/*&#39;]</code>, <code>[&#39;audio/*&#39;]</code>, or can be an exact MIME-Type such as <code>[&#39;application/rtf&#39;]</code>.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">mimeTypes</span><span class="hljs-params">(mimeTypes, [customErrorMessage])</span></span>
</code></pre><h4 id="file-validators-enforce-mime-type-match">Enforce Mime Type Match&nbsp;<a href="#file-validators-enforce-mime-type-match"><i class="fa fa-link"></i></a></h4><p>Malicious users may attempt to upload files to your forms which are not what they seem - for example, uploading a file with extension ‘.jpg’ that is actually a ‘.zip’ file etc.</p>
<p>This validator uses <a href="https://github.com/mscdex/mmmagic">mmmagic</a> bindings to <a href="http://www.darwinsys.com/file/">libmagic</a> to inspect the uploaded file and ensure that the file’s MIME-Type
actually matches its contents.</p>
<p>Due to the async nature of the libmagic bindings, this validator must be used with the <code>validate()</code> method on the form, as <code>validateSync()</code> will not suffice.</p>
<pre><code><span class="hljs-function"><span class="hljs-title">enforceMimeMatch</span><span class="hljs-params">([customErrorMessage])</span></span>
</code></pre></div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="custom-validators">Custom Validators&nbsp;<a href="#custom-validators"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>Plaits provides the ability to define custom validation functions for your form models.</p>
<p>The returned result of the custom validation function will be cast to a promise,
so the validation function can be synchronous or asynchronous depending on the requirements of the validation.</p>
<p>If the value provided is valid, then the overall function should return ‘true’,
however if the value is invalid, a string should be returned explaining why the field is invalid.</p>
<p>Asynchronous use cases would be such things as checking a database to ensure a unique email address or username.</p>
<h4 id="custom-validators-example">Example&nbsp;<a href="#custom-validators-example"><i class="fa fa-link"></i></a></h4><p>Custom validation functions should be defined as such:</p>
<pre><code>/**
 * Define Your Unique Email Validator
 * @param fieldValue      - The value of the field
 * @param fieldLabel      - The label of the field
 * @param formModel       - The current instance of the form model this validator belongs to
 * @param additionalVars  - Additional vars passed to the validate() <span class="hljs-keyword">function</span> (explained later)
 */
var uniqueEmailValidator = <span class="hljs-keyword">function</span>(fieldValue, fieldLabel, formModel, additionalVars) {
  // Table
  var userTable = knexInstance(<span class="hljs-string">'users'</span>);
  // Query
  <span class="hljs-keyword">return</span> userTable.select(<span class="hljs-string">'email'</span>).where(<span class="hljs-string">'email'</span>, <span class="hljs-string">'='</span>, fieldValue).then(<span class="hljs-keyword">function</span>(result) {
      // Result Count
      <span class="hljs-keyword">if</span> (result.length &gt; <span class="hljs-number">0</span>) {
          // Return An Error
          <span class="hljs-keyword">return</span> <span class="hljs-string">'That email address is already in use!'</span>;
      } <span class="hljs-keyword">else</span> {
          // Return True (Valid)
          <span class="hljs-keyword">return</span> true;
      }
  });
};

// Add to Register Form Declaration
var RegisterForm = Plaits.Model.extend(
  {
    <span class="hljs-keyword">...</span>
    validators: {
      email_address: uniqueEmailValidator
    }
    <span class="hljs-keyword">...</span>
  }
);
</code></pre></div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="form-request-parsing">Form Request Parsing&nbsp;<a href="#form-request-parsing"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>If you are using the <a href="http://expressjs.com/">Express</a> framework, you can have the module parse requests made to your routes.</p>
<p>This will analyse your GET and POST parameters, and assign the values to the form as they are found.</p>
<p>Values should be passed as <code>(form name)_(field name)</code>, for example <code>register_form_email_address</code>, <code>register_form_confirm_password</code> and so on.</p>
<h4 id="form-request-parsing-example">Example&nbsp;<a href="#form-request-parsing-example"><i class="fa fa-link"></i></a></h4><pre><code><span class="hljs-comment">// Register Form</span>
<span class="hljs-keyword">var</span> RegisterForm = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../forms/register'</span>);

<span class="hljs-comment">// Test Route - POST</span>
<span class="hljs-comment">// Synchronous Parsing (Most common)</span>
router.post(<span class="hljs-string">'/test'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(req, res)</span> </span>{
    <span class="hljs-comment">// New Form</span>
    <span class="hljs-keyword">var</span> registerForm = <span class="hljs-keyword">new</span> RegisterForm();
    <span class="hljs-comment">// Parse Request</span>
    registerForm.parseRequestSync(req);
});

<span class="hljs-comment">// Test Route - POST</span>
<span class="hljs-comment">// Asynchronous Parsing. Useful if you are using any related events that are also asynchronous.</span>
<span class="hljs-comment">// Unlikely but doesn't hurt to provide the option.</span>
router.post(<span class="hljs-string">'/test'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(req, res)</span> </span>{
    <span class="hljs-comment">// New Form</span>
    <span class="hljs-keyword">var</span> registerForm = <span class="hljs-keyword">new</span> RegisterForm();
    <span class="hljs-comment">// Parse Request, Promise Based</span>
    registerForm.parseRequest(req).then(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(formModel)</span> </span>{
      <span class="hljs-comment">// ...</span>
    });
});
</code></pre></div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="form-validation">Form Validation&nbsp;<a href="#form-validation"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>The main use of Plaits is to validate the data passed to the model and return feedback based on the validation result.</p>
<p>Validation can be done synchronously or asynchronously depending on the requirements of the form - if using all synchronous validators, then you can validate synchronously
for simpler flow control. If there is a validator that needs to be asynchronous (such as checking a web service or querying a database), then you can validate asynchronously
using Promises.</p>
<p>All current stock validators are synchronous, with the exception of the undocumented and yet unfinished File validators (see <a href="#coming-soon">coming soon</a>).</p>
<h4 id="form-validation-validation">Validation&nbsp;<a href="#form-validation-validation"><i class="fa fa-link"></i></a></h4><h5 id="asynchronous-validation">Asynchronous Validation</h5>
<p>To validate a model asynchronously, use the <code>validate()</code> method, which returns a Promise, eventually being fulfilled with the result of the validation.</p>
<p><strong>Please</strong> note that the Promise is only rejected when something goes wrong with the validation - database connection timeout, exceptions etc.
If the model is invalid (i.e. the end result is false), the promise is <strong>still</strong> fulfilled, with a false value.
For a great explanation, see <a href="http://andyshora.com/promises-angularjs-explained-as-cartoon.html">this cartoon</a>.</p>
<pre><code>// Validate
registerForm.validate().then(<span class="hljs-keyword">function</span> (result) {
  // <span class="hljs-keyword">...</span>
});
</code></pre><h5 id="synchronous-validation">Synchronous Validation</h5>
<p>To validate a model asynchronously, use the <code>validateSync()</code> method, which returns the result of the validation:</p>
<pre><code>// <span class="hljs-type">Validate</span>
<span class="hljs-keyword">var</span> <span class="hljs-literal">result</span> = registerForm.validateSync();
</code></pre><h4 id="form-validation-passing-objects-to-validators">Passing Objects to Validators&nbsp;<a href="#form-validation-passing-objects-to-validators"><i class="fa fa-link"></i></a></h4><p>It is often the case that if you’re using a custom validator, you want to pass extra objects or information into the validation function (current user account etc).</p>
<p>This is possible with the <code>additionalVars</code> parameter on both the <code>validate()</code> and <code>validateSync()</code> methods, which will then pass the objects into the custom validation function:</p>
<h5 id="call-validate">Call Validate</h5>
<pre><code>// <span class="hljs-type">Current</span> <span class="hljs-type">User</span>
<span class="hljs-keyword">var</span> currentUser = req.user;
// <span class="hljs-type">Validate</span> <span class="hljs-type">With</span> <span class="hljs-type">Additional</span> <span class="hljs-type">Vars</span>
<span class="hljs-keyword">var</span> <span class="hljs-literal">result</span> = registerForm.validateSync(currentUser);
</code></pre><h5 id="inside-the-function">Inside The Function</h5>
<pre><code><span class="hljs-comment">// Custom Validator Function</span>
<span class="hljs-keyword">var</span> differentPassword = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fieldValue, fieldLabel, formModel, currentUser)</span> </span>{
  <span class="hljs-comment">// Do Things With 'currentUser'</span>
};
</code></pre><h4 id="form-validation-errors">Errors&nbsp;<a href="#form-validation-errors"><i class="fa fa-link"></i></a></h4><p>Validation would be useless if it were not able to display useful feedback to the user. When a field fails validation, the error is added to the internal <code>_errors</code> object.</p>
<p>You can get errors from the model with the following functions:</p>
<h4 id="form-validation-geterrors">getErrors&nbsp;<a href="#form-validation-geterrors"><i class="fa fa-link"></i></a></h4><p>Returns the errors for all fields, or if passed a ‘field’ parameter, returns errors for only that field.</p>
<p>If there are no errors, returns an empty object.</p>
<pre><code>model.<span class="hljs-function"><span class="hljs-title">getErrors</span><span class="hljs-params">([field])</span></span>
</code></pre><h4 id="form-validation-getfirsterror">getFirstError&nbsp;<a href="#form-validation-getfirsterror"><i class="fa fa-link"></i></a></h4><p>Returns the first error for the specified field.</p>
<p>If there are no errors for that field, returns an empty string.</p>
<pre><code>model.<span class="hljs-function"><span class="hljs-title">getFirstError</span><span class="hljs-params">(field)</span></span>
</code></pre><h4 id="form-validation-errors-object">Errors Object&nbsp;<a href="#form-validation-errors-object"><i class="fa fa-link"></i></a></h4><p>The errors object is a key:array object that contains an entry for each field that has validation errors, for example:</p>
<pre><code>{
  'username': [
    'Username must <span class="hljs-keyword">be</span> at least <span class="hljs-number">8</span> characters long.',
    'Username must consist of only letters and numbers.'
  ],
  'password': [
    'Password is a required field.'
  ]
}
</code></pre></div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="events">Events&nbsp;<a href="#events"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>Plaits models come with custom events that allow you to hook in and modify model behaviour or attributes when triggered.</p>
<h4 id="events-backbone-events">Backbone Events&nbsp;<a href="#events-backbone-events"><i class="fa fa-link"></i></a></h4><p>Since Plaits models are essentially glorified <a href="http://backbonejs.org/">Backbone</a> models, you have access to all the underlying event functionality
that Backbone provides. See the Backbone documentation for each of:</p>
<ul>
<li><p><a href="http://backbonejs.org/#Events-on">on</a></p>
</li>
<li><p><a href="http://backbonejs.org/#Events-off">off</a></p>
</li>
<li><p><a href="http://backbonejs.org/#Events-trigger">trigger</a></p>
</li>
<li><p><a href="http://backbonejs.org/#Events-once">once</a></p>
</li>
<li><p><a href="http://backbonejs.org/#Events-listenTo">listenTo</a></p>
</li>
<li><p><a href="http://backbonejs.org/#Events-stopListening">stopListening</a></p>
</li>
<li><p><a href="http://backbonejs.org/#Events-listenToOnce">listenToOnce</a></p>
</li>
</ul>
<h4 id="events-plaits-specific-events">Plaits Specific Events&nbsp;<a href="#events-plaits-specific-events"><i class="fa fa-link"></i></a></h4><p>Events use <a href="https://github.com/bookshelf/trigger-then">trigger-then</a>, allowing for asynchronous behaviour in your event listeners if necessary.
Ensure however, that if you are using asynchronous events that you use the asynchronous versions of <code>parseRequest</code> and <code>validate</code>.</p>
<p>Specify the events using <code>on()</code> in your initialize method like so:</p>
<pre><code>// Register Form Declaration
var RegisterForm = Plaits.Model.extend(
  {
    <span class="hljs-keyword">...</span>
    initialize: <span class="hljs-keyword">function</span> () {
      this.on(<span class="hljs-string">'beforeParseRequest'</span>, <span class="hljs-keyword">function</span> (model, request) {
        <span class="hljs-keyword">...</span>
      });
    },
    <span class="hljs-keyword">...</span>
  }
);
</code></pre><h4 id="events-beforeparserequest">beforeParseRequest&nbsp;<a href="#events-beforeparserequest"><i class="fa fa-link"></i></a></h4><p>This even fires before a request is parsed, allowing you to modify the request or the model.</p>
<pre><code>  /**
   * Before Parse Event
   * @param model PlaitsModel - The form model
   * @param request Object - The express request object
   */
  this.on(<span class="hljs-string">'beforeParseRequest'</span>, <span class="hljs-keyword">function</span> (model, request) {
    <span class="hljs-keyword">...</span>
  });
</code></pre><h4 id="events-afterparserequest">afterParseRequest&nbsp;<a href="#events-afterparserequest"><i class="fa fa-link"></i></a></h4><p>This even fires after a request is parsed.</p>
<pre><code>  /**
   * Before Parse Event
   * @param model PlaitsModel - The form model
   * @param request Object - The express request object
   */
  this.on(<span class="hljs-string">'afterParseRequest'</span>, <span class="hljs-keyword">function</span> (model, request) {
    <span class="hljs-keyword">...</span>
  });
</code></pre><h4 id="events-beforevalidate">beforeValidate&nbsp;<a href="#events-beforevalidate"><i class="fa fa-link"></i></a></h4><p>This even fires before a model is validated.</p>
<pre><code>  /**
   * Before Validate Event
   * @param model PlaitsModel - The form model
   */
  this.on(<span class="hljs-string">'beforeValidate'</span>, <span class="hljs-keyword">function</span> (model) {
    <span class="hljs-keyword">...</span>
  });
</code></pre><h4 id="events-aftervalidate">afterValidate&nbsp;<a href="#events-aftervalidate"><i class="fa fa-link"></i></a></h4><p>This even fires after a model has been validated.</p>
<pre><code>  /**
   * After Validate Event
   * @param model PlaitsModel - The form model
   * @param validationResult Boolean - Whether the model is valid or not
   * @param validationErrors Object - An object containing any validation errors
   */
  this.on(<span class="hljs-string">'afterValidate'</span>, <span class="hljs-keyword">function</span> (model, validationResult, validationErrors) {
    <span class="hljs-keyword">...</span>
  });
</code></pre></div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="express-middleware">Express Middleware&nbsp;<a href="#express-middleware"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>Plaits provides a middleware for Express that gives you the ability to render form fields automatically in your templates.</p>
<pre><code>Plaits.<span class="hljs-function"><span class="hljs-title">ExpressMiddleware</span><span class="hljs-params">([options])</span></span>
</code></pre><h4 id="express-middleware-options">Options&nbsp;<a href="#express-middleware-options"><i class="fa fa-link"></i></a></h4><p>The middleware takes an options object, with the defaults:</p>
<pre><code>{
  <span class="hljs-attribute">name</span>: <span class="hljs-string">'Plaits'</span>, <span class="hljs-comment">// Helper Name for res.locals</span>
  <span class="hljs-attribute">templatePaths</span>: [<span class="hljs-string">'node_modules/plaits/lib/templates'</span>], <span class="hljs-comment">// Template Locations, see Html Templates</span>
  <span class="hljs-attribute">templateExtension</span>: <span class="hljs-string">'jade'</span>, <span class="hljs-comment">// Template Extension, see Html Templates</span>
  <span class="hljs-attribute">renderSpecialAttributesValue</span>: true, <span class="hljs-comment">// Whether to Render Vals for Some Attributes (eg. muted)</span>
  <span class="hljs-attribute">errorCssClass</span>: <span class="hljs-string">'error'</span>, <span class="hljs-comment">// Error CSS Class On Generated Form Elements</span>
  <span class="hljs-attribute">requiredCssClass</span>: <span class="hljs-string">'required'</span>, <span class="hljs-comment">// Required CSS Class on Generated Form Elements</span>
  <span class="hljs-attribute">errorContainerTag</span>: <span class="hljs-string">'div'</span>, <span class="hljs-comment">// Container Wrapper Tag For Generated Error Output</span>
  <span class="hljs-attribute">errorContainerClass</span>: <span class="hljs-string">'error-message'</span>, <span class="hljs-comment">// Container Wrapper Class for firstErrorFor()</span>
  <span class="hljs-attribute">errorSummaryContainerClass</span>: <span class="hljs-string">'error-summary'</span>, <span class="hljs-comment">// Container Class for Generated Error Summary</span>
  <span class="hljs-attribute">errorSummaryText</span>: <span class="hljs-string">'Please fix the following validation errors:'</span> <span class="hljs-comment">// Error Summary Text</span>
}
</code></pre><p>See the below sections for further explanations on some of these options.</p>
</div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="html-helpers">Html Helpers&nbsp;<a href="#html-helpers"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>When using the Middleware specified above, it will add a helper to your <code>res.locals</code> which is then available in your templates.</p>
<p>You can specify the name of this helper by passing the option <code>name</code> as part of the Middleware, which defaults to <code>Plaits</code>.</p>
<p>You can also use multiple middleware if you need different behaviour by specifying different names for each, for example:</p>
<pre><code><span class="hljs-comment">// Plaits Frontend Middleware</span>
<span class="hljs-attribute">app</span>.<span class="hljs-function">use</span>(Plaits.<span class="hljs-function">ExpressMiddleware</span>());

<span class="hljs-comment">// Plaits Admin Middleware</span>
<span class="hljs-tag">app</span><span class="hljs-class">.use</span>(Plaits.<span class="hljs-function">ExpressMiddleware</span>({<span class="hljs-attribute">name</span>: <span class="hljs-string">'PlaitsAdmin'</span>, <span class="hljs-attribute">requiredCssClass</span>: <span class="hljs-string">'required-input'</span>}));
</code></pre><p>Each of the following helpers is accessible under the Html property of your middleware item;</p>
<pre><code>// Defaults
Plaits.Html.textFieldFor(<span class="hljs-keyword">...</span>)
// Using <span class="hljs-string">'PlaitsAdmin'</span>
PlaitsAdmin.Html.textFieldFor(<span class="hljs-keyword">...</span>)
</code></pre><h4 id="html-helpers-button">button&nbsp;<a href="#html-helpers-button"><i class="fa fa-link"></i></a></h4><p>Renders a button.</p>
<pre><code><span class="hljs-tag">button</span>: function (<span class="hljs-tag">label</span>, [htmlAttributes])
</code></pre><h4 id="html-helpers-resetbutton">resetButton&nbsp;<a href="#html-helpers-resetbutton"><i class="fa fa-link"></i></a></h4><p>Render a reset button.</p>
<pre><code>resetButton: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(text, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-submitbutton">submitButton&nbsp;<a href="#html-helpers-submitbutton"><i class="fa fa-link"></i></a></h4><p>Render a submit button.</p>
<pre><code>submitButton: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(text, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-labelfor">labelFor&nbsp;<a href="#html-helpers-labelfor"><i class="fa fa-link"></i></a></h4><p>Generates a label for a specified input.</p>
<p>If the field is required, it will contain <code>&lt;span&gt;*&lt;/span&gt;</code> next to the text to show the required state. It will also have the <code>requiredCssClass</code>.</p>
<p>In the case that this field fails validation, it will also have <code>errorCssClass</code> added.</p>
<pre><code>labelFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-firsterrorfor">firstErrorFor&nbsp;<a href="#html-helpers-firsterrorfor"><i class="fa fa-link"></i></a></h4><p>This will show the first error for the given model’s field/attribute.</p>
<p>The wrapping tag is specified by <code>errorContainerTag</code> (defaults to <code>div</code>) and the class will be <code>errorContainerClass</code> (defaults to <code>error-message</code>).</p>
<pre><code>firstErrorFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-errorsfor">errorsFor&nbsp;<a href="#html-helpers-errorsfor"><i class="fa fa-link"></i></a></h4><p>Generates a container with all errors for the given model’s field/attribute.</p>
<p>The wrapping tag is specified by <code>errorContainerTag</code> (defaults to <code>div</code>) and the class will be <code>errorSummaryContainerClass</code> (defaults to <code>error-summary</code>).</p>
<pre><code>errorsFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-errorsummary">errorSummary&nbsp;<a href="#html-helpers-errorsummary"><i class="fa fa-link"></i></a></h4><p>Generates an error summary with all errors for the entire model.</p>
<p>Takes an optional <code>summaryText</code> parameter, which will be displayed at the top of the summary.</p>
<p>This defaults to ‘Please fix the following validation errors’, or whatever you have passed into the initial Middleware options.</p>
<pre><code>errorSummary: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, [summaryText], [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-textfieldfor">textFieldFor&nbsp;<a href="#html-helpers-textfieldfor"><i class="fa fa-link"></i></a></h4><p>Render a text input for the given model’s attribute.</p>
<pre><code>textFieldFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-emailfieldfor">emailFieldFor&nbsp;<a href="#html-helpers-emailfieldfor"><i class="fa fa-link"></i></a></h4><p>Render an email input for the given model’s attribute.</p>
<pre><code>emailFieldFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-textareafor">textAreaFor&nbsp;<a href="#html-helpers-textareafor"><i class="fa fa-link"></i></a></h4><p>Render a text area for the given model’s attribute.</p>
<pre><code>textAreaFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-numberfieldfor">numberFieldFor&nbsp;<a href="#html-helpers-numberfieldfor"><i class="fa fa-link"></i></a></h4><p>Render a number input for the given model’s attribute.</p>
<pre><code>numberFieldFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-rangefieldfor">rangeFieldFor&nbsp;<a href="#html-helpers-rangefieldfor"><i class="fa fa-link"></i></a></h4><p>Render a range input for the given model’s attribute.</p>
<pre><code>rangeFieldFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-colorfieldfor">colorFieldFor&nbsp;<a href="#html-helpers-colorfieldfor"><i class="fa fa-link"></i></a></h4><p>Render a color input for the given model’s attribute.</p>
<pre><code>colorFieldFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-searchfieldfor">searchFieldFor&nbsp;<a href="#html-helpers-searchfieldfor"><i class="fa fa-link"></i></a></h4><p>Render a search input for the given model’s attribute.</p>
<pre><code>searchFieldFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-datefieldfor">dateFieldFor&nbsp;<a href="#html-helpers-datefieldfor"><i class="fa fa-link"></i></a></h4><p>Render a date input for the given model’s attribute.</p>
<pre><code>dateFieldFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-timefieldfor">timeFieldFor&nbsp;<a href="#html-helpers-timefieldfor"><i class="fa fa-link"></i></a></h4><p>Render a time input for the given model’s attribute.</p>
<pre><code>timeFieldFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-telfieldfor">telFieldFor&nbsp;<a href="#html-helpers-telfieldfor"><i class="fa fa-link"></i></a></h4><p>Render a tel input for the given model’s attribute.</p>
<pre><code>telFieldFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-urlfieldfor">urlFieldFor&nbsp;<a href="#html-helpers-urlfieldfor"><i class="fa fa-link"></i></a></h4><p>Render a url input for the given model’s attribute.</p>
<pre><code>urlFieldFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-hiddenfieldfor">hiddenFieldFor&nbsp;<a href="#html-helpers-hiddenfieldfor"><i class="fa fa-link"></i></a></h4><p>Render a hidden input for the given model’s attribute.</p>
<pre><code>hiddenFieldFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-passwordfieldfor">passwordFieldFor&nbsp;<a href="#html-helpers-passwordfieldfor"><i class="fa fa-link"></i></a></h4><p>Render a password input for the given model’s attribute.</p>
<pre><code>passwordFieldFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-filefieldfor">fileFieldFor&nbsp;<a href="#html-helpers-filefieldfor"><i class="fa fa-link"></i></a></h4><p>Render a file input for the given model’s attribute.</p>
<pre><code>fileFieldFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-selectfor">selectFor&nbsp;<a href="#html-helpers-selectfor"><i class="fa fa-link"></i></a></h4><p>Render a select field for the given model’s attribute.</p>
<p>Takes an <code>items</code> parameter, which should be a key:value object specifying which items should be the options.</p>
<pre><code>selectFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, items, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-checkboxfor">checkboxFor&nbsp;<a href="#html-helpers-checkboxfor"><i class="fa fa-link"></i></a></h4><p>Render a checkbox input for the given model’s attribute.</p>
<pre><code>checkboxFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-radiofor">radioFor&nbsp;<a href="#html-helpers-radiofor"><i class="fa fa-link"></i></a></h4><p>Render a radio input for the given model’s attribute.</p>
<pre><code>radioFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-checkboxlistfor">checkboxListFor&nbsp;<a href="#html-helpers-checkboxlistfor"><i class="fa fa-link"></i></a></h4><p>Render multiple checkbox fields for the given model’s attribute.</p>
<p>Takes an <code>items</code> parameter, which should be a key:value object specifying which items should be individually rendered.</p>
<pre><code>checkboxListFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, items, [htmlAttributes])</span></span>
</code></pre><h4 id="html-helpers-radiolistfor">radioListFor&nbsp;<a href="#html-helpers-radiolistfor"><i class="fa fa-link"></i></a></h4><p>Render multiple radio fields for the given model’s attribute.</p>
<p>Takes an <code>items</code> parameter, which should be a key:value object specifying which items should be individually rendered.</p>
<pre><code>radioListFor: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, attribute, items, [htmlAttributes])</span></span>
</code></pre></div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="html-templates">Html Templates&nbsp;<a href="#html-templates"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>In addition to the <a href="#html-helpers">Html Helpers</a> specified above, Plaits also comes with a set of ready-built Html templates that are wrappers for the above helpers.</p>
<p>The Html templates are built with <a href="http://jade-lang.com/">Jade</a>.</p>
<p>Each of the field helpers specified above has a corresponding template which contains a label, a field of the specified type, and will render any validation errors from that field.</p>
<p>The template functions are named the same as their helpers, only without the word ‘For’ in the function name, so <code>email()</code>, <code>text()</code> etc.</p>
<h4 id="html-templates-location">Location&nbsp;<a href="#html-templates-location"><i class="fa fa-link"></i></a></h4><p>If you wish the view the default templates, they are in <code>lib/templates</code>.</p>
<h4 id="html-templates-usage">Usage&nbsp;<a href="#html-templates-usage"><i class="fa fa-link"></i></a></h4><p>The templates are accessible inside your templates via your middleware, like so:</p>
<pre><code>// Default <span class="hljs-string">'Plaits'</span>
Plaits.Html.Template.text(<span class="hljs-keyword">...</span>)
Plaits.Html.Template.email(<span class="hljs-keyword">...</span>)
Plaits.Html.Template.select(<span class="hljs-keyword">...</span>)

// Different Name Specified For Middleware, e.g. <span class="hljs-string">'PlaitsAdmin'</span>
PlaitsAdmin.Html.Template.textArea(<span class="hljs-keyword">...</span>)
PlaitsAdmin.Html.Template.number(<span class="hljs-keyword">...</span>)
PlaitsAdmin.Html.Template.password(<span class="hljs-keyword">...</span>)
</code></pre></div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="custom-html-templates">Custom Html Templates&nbsp;<a href="#custom-html-templates"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>The Plaits templates can be customised in a few different ways.</p>
<p>When specifying your middleware options for Plaits, it is possible to pass a custom <code>templatePaths</code> option.</p>
<p>Plaits templates are cached at render time for performance, so you will need to restart your application server when changing the templates.</p>
<p>This option can be a single path, or an array, of locations where Plaits should look for form html templates:</p>
<pre><code><span class="hljs-comment">// Resolve Path</span>
<span class="hljs-attribute">var</span> <span class="hljs-attribute">myTemplatePath</span>: path.<span class="hljs-function">join</span>(__dirname, <span class="hljs-string">'views'</span>, <span class="hljs-string">'forms'</span>);
<span class="hljs-comment">// Use Middleware</span>
<span class="hljs-tag">app</span><span class="hljs-class">.use</span>(Plaits.<span class="hljs-function">ExpressMiddleware</span>({<span class="hljs-attribute">templatePaths</span>: [myTemplatePath]));
</code></pre><h4 id="custom-html-templates-overriding-defaults">Overriding Defaults&nbsp;<a href="#custom-html-templates-overriding-defaults"><i class="fa fa-link"></i></a></h4><p>Simply copy the templates you wish to override from <code>lib/templates</code> to your new location - in the above example <code>views/forms</code>.</p>
<p>When Plaits scans the directories for the requested template, e.g. the email template, it will prioritise the custom location over the default location,
and will render the one residing in <code>views/forms</code>.</p>
<h4 id="custom-html-templates-entirely-custom-templates">Entirely Custom Templates&nbsp;<a href="#custom-html-templates-entirely-custom-templates"><i class="fa fa-link"></i></a></h4><p>Since you may wish to have multiple versions of an template, e.g. different classes or wrappers, the Plaits middleware provides the following function:</p>
<pre><code>/**
 * <span class="hljs-type">Render</span> a <span class="hljs-type">Custom</span> <span class="hljs-type">Template</span>.
 * <span class="hljs-type">Takes</span> <span class="hljs-keyword">template</span> name, model, attribute <span class="hljs-keyword">and</span> <span class="hljs-type">any</span> additional parameters to pass to the <span class="hljs-keyword">template</span>.
 * @param templateName <span class="hljs-type">string</span>
 * @param model <span class="hljs-type">PlaitsModel</span>
 * @param attribute <span class="hljs-type">string</span>
 * @param additionalParams <span class="hljs-type">Object</span>
 * @<span class="hljs-keyword">return</span> {*}
 */
render: function (templateName, model, attribute, [additionalParams])
</code></pre><p>This function will look for the template with <code>templateName</code> and will render that template if found.</p>
<p>Use the <code>additionalParams</code> parameter to pass any other parameters required for the rendering of the template, e.g. a list of items for a <code>select</code> input.</p>
<p>While templates can have customisable file extensions (via the <code>templateExtension</code> option passed to your middleware), the templates <strong>MUST</strong>
be in the <a href="http://jade-lang.com/">Jade</a> template language. While this is more opinionated that is pleasant, Jade is at least very well supported,
documented and tested.</p>
</div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="full-example">Full Example&nbsp;<a href="#full-example"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>Below is a full (although very simple) end-to-end example of creating, rendering and validating a Plaits model using Express.</p>
<h4 id="full-example-middleware">Middleware&nbsp;<a href="#full-example-middleware"><i class="fa fa-link"></i></a></h4><p>Express <code>app.js</code>, before routes:</p>
<pre><code><span class="hljs-comment">// Require Plaits</span>
<span class="hljs-keyword">var</span> Plaits = <span class="hljs-keyword">require</span>(<span class="hljs-string">'plaits'</span>);

<span class="hljs-comment">// Plaits Middleware</span>
app.<span class="hljs-keyword">use</span>(Plaits.ExpressMiddleware());
</code></pre><h4 id="full-example-model">Model&nbsp;<a href="#full-example-model"><i class="fa fa-link"></i></a></h4><p>Model Declaration, living in <code>forms/register.js</code>:</p>
<pre><code><span class="hljs-comment">// Require Plaits</span>
<span class="hljs-keyword">var</span> Plaits = <span class="hljs-built_in">require</span>(<span class="hljs-string">'plaits'</span>);

<span class="hljs-comment">// Register Form Declaration</span>
<span class="hljs-keyword">var</span> RegisterForm = Plaits.Model.extend(
  {
    <span class="hljs-comment">// Form Name</span>
    name: <span class="hljs-string">'register_form'</span>,
    <span class="hljs-comment">// Field List</span>
    fields: [
      <span class="hljs-string">'username'</span>,
      <span class="hljs-string">'email_address'</span>,
      <span class="hljs-string">'password'</span>,
      <span class="hljs-string">'confirm_password'</span>
    ],
    <span class="hljs-comment">// Validators</span>
    validators: {
      username: [
        Plaits.Validators.required(),
        Plaits.Validators.alphanumeric()
      ],
      email_address: [
        Plaits.Validators.required(),
        Plaits.Validators.email()
      ],
      password: [
        Plaits.Validators.required(),
        Plaits.Validators.minLength(<span class="hljs-number">8</span>)
      ],
      confirm_password [
        Plaits.Validators.matchProperty(<span class="hljs-string">'password'</span>)
      ]
    }
  }
);

<span class="hljs-comment">// Export Form</span>
<span class="hljs-built_in">module</span>.exports = RegisterForm;
</code></pre><h4 id="full-example-routes">Routes&nbsp;<a href="#full-example-routes"><i class="fa fa-link"></i></a></h4><p>Route file, <code>routes/account.js</code>:</p>
<pre><code><span class="hljs-comment">// Require Form</span>
<span class="hljs-keyword">var</span> RegisterForm = require(<span class="hljs-string">'../forms/register'</span>);

<span class="hljs-comment">// Account Register Route - GET</span>
router.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/account/register'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(req, res)</span> </span>{
    <span class="hljs-comment">// New Form</span>
    <span class="hljs-keyword">var</span> registerForm = <span class="hljs-keyword">new</span> RegisterForm();
    <span class="hljs-comment">// Render Template, Passing Form</span>
    res.render(<span class="hljs-string">'account/register'</span>, {
        registerForm: registerForm
    });
});

<span class="hljs-comment">// Account Register Route - POST</span>
router.post(<span class="hljs-string">'/account/register'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(req, res)</span> </span>{
    <span class="hljs-comment">// New Form</span>
    <span class="hljs-keyword">var</span> registerForm = <span class="hljs-keyword">new</span> RegisterForm();
    <span class="hljs-comment">// Parse Request &amp; Validate</span>
    registerForm.parseRequestSync(req).validate().then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(result)</span> </span>{
        <span class="hljs-comment">// Valid?</span>
        <span class="hljs-keyword">if</span> (result) {
            <span class="hljs-comment">// Do Register / Database Stuff Here</span>
            <span class="hljs-comment">// ...</span>
            <span class="hljs-comment">// Redirect</span>
            res.redirect(<span class="hljs-string">'/account/register/success'</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// Invalid, Re-Render The Template</span>
            res.render(<span class="hljs-string">'account/register'</span>, {
                registerForm: registerForm
            });
        }
    }).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
        <span class="hljs-comment">// Something Went Horribly Wrong, Caught A Rejected Promise</span>
        res.json(e);
    });
});
</code></pre><h4 id="full-example-template">Template&nbsp;<a href="#full-example-template"><i class="fa fa-link"></i></a></h4><p>Register template, <code>account/register.jade</code>:</p>
<pre><code>extends layout

block <span class="hljs-attribute">content</span>
    <span class="hljs-function"><span class="hljs-title">form</span><span class="hljs-params">(method=<span class="hljs-string">'POST'</span>)</span></span>
        !=Plaits<span class="hljs-class">.Html</span><span class="hljs-class">.Template</span><span class="hljs-class">.text</span>(registerForm, <span class="hljs-string">'username'</span>)
        !=Plaits<span class="hljs-class">.Html</span><span class="hljs-class">.Template</span><span class="hljs-class">.email</span>(registerForm, <span class="hljs-string">'email'</span>)
        !=Plaits<span class="hljs-class">.Html</span><span class="hljs-class">.Template</span><span class="hljs-class">.password</span>(registerForm, <span class="hljs-string">'password'</span>)
        !=Plaits<span class="hljs-class">.Html</span><span class="hljs-class">.Template</span><span class="hljs-class">.password</span>(registerForm, <span class="hljs-string">'confirm_password'</span>)
        !=Plaits<span class="hljs-class">.Html</span><span class="hljs-class">.Template</span><span class="hljs-class">.submit</span>()
</code></pre><p>And that is enough to render the form, handle the POST request, validate the form and display any validation errors to the user.</p>
</div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="coming-soon">Coming Soon&nbsp;<a href="#coming-soon"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><p>Here are a few things I plan on incorporating or working on the future.</p>
<h4 id="coming-soon-more-validators">More Validators&nbsp;<a href="#coming-soon-more-validators"><i class="fa fa-link"></i></a></h4><p>Extra provided validators are always useful to prevent people from having to write their own, especially if tested and approved, for example:</p>
<ul>
<li>Date Range Validator (Dates between X and Y, dates only before Y, etc.)</li>
</ul>
<h4 id="coming-soon-examples-repository">Examples Repository&nbsp;<a href="#coming-soon-examples-repository"><i class="fa fa-link"></i></a></h4><p>A GitHub repository with some examples of using Plaits in different circumstances would be useful.</p>
</div></div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="changelog">Changelog&nbsp;<a href="#changelog"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><h5 id="0-1-3">0.1.3</h5>
<ul>
<li>Fixed issue with mime match validator and file field mapping</li>
</ul>
<h5 id="0-1-2">0.1.2</h5>
<ul>
<li><p>Added file validation support (required, minSize, maxSize, mimeTypes &amp; enforceMimeMatch - see <a href="#file-validators">File Validators</a>)</p>
</li>
<li><p>Added support for mapping file field values to their respective fields (see <a href="#file-validators-file-field-mapping">File Field Mapping</a>)</p>
</li>
<li><p>Updated various dependencies (Namely lodash to v3)</p>
</li>
</ul>
<h5 id="0-1-1">0.1.1</h5>
<ul>
<li>Added New Validators<ul>
<li><a href="#provided-validators-min">Min</a></li>
<li><a href="#provided-validators-max">Max</a></li>
<li><a href="#provided-validators-range">Range</a></li>
</ul>
</li>
</ul>
<h5 id="0-1-0-initial-release">0.1.0 - Initial Release</h5>
<ul>
<li>Initial Release</li>
</ul>
</div></div></div></div></div></div><p style="text-align: center;" class="text-muted">Generated by&nbsp;<a href="https://github.com/danielgtaylor/aglio" class="aglio">aglio</a>&nbsp;on 02 Feb 2015</p><div id="localFile" style="display: none; position: absolute; top: 0; left: 0; width: 100%; color: white; background: red; font-size: 150%; text-align: center; padding: 1em;">This page may not display correctly when opened as a local file. Instead, view it from a web server.

</div></body><script src="//code.jquery.com/jquery-1.11.0.min.js"></script><script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script><script>(function() {
  if (location.protocol === 'file:') {
    document.getElementById('localFile').style.display = 'block';
  }

}).call(this);
</script><script>(function() {
  $('table').addClass('table');

}).call(this);
</script></html>